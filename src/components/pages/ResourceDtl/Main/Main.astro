---
import * as prismicH from "@prismicio/client";

import ResourceMain from "./Main";
import { getAllByType } from "@/prismic.js";

import icLinked from "@assets/ic-linkedin.svg?raw";
import icFacebook from "@assets/ic-facebook.svg?raw";
import icShare from "@assets/ic-copyUrl.svg?raw";
import arrIcon from "@assets/arr-right.svg?raw";

const { data, last_publication_date, uid } = Astro.props;
const resourceList = await getAllByType("resource");
const relList = resourceList.filter(
  (item: any) => item.data.category == data.category
);
const removeDupList = relList.filter((item: any) => item.uid != uid);

console.log(last_publication_date);
---

<ResourceMain relList={removeDupList} {...Astro.props} client:load>
  <Fragment set:html={prismicH.asHTML(data.content)} />
  <Fragment set:html={arrIcon} slot="arrIcon" />
  <Fragment set:html={icLinked} slot="icLinked" />
  <Fragment set:html={icFacebook} slot="icFacebook" />
  <Fragment set:html={icShare} slot="icShare" />
</ResourceMain>
