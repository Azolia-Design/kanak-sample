---
const { title, compare_list } = Astro.props;

import HomeCompare from './Compare';
import { Image } from 'astro:assets';
import { getByUID } from '@/prismic.js';
import comparePlates from '@assets/compare.png';
import compareDot from '@assets/compare-dot-single.svg';
import compareDash from '@assets/compare-dash.svg';
import compareLine from '@assets/compare-line.svg?raw';
import compareGood from '@/assets/comp-good.svg';
import compareBad from '@assets/comp-bad.svg';

const list = await Promise.all(
    compare_list.map(async (compare: any, idx: number) => {
        let item = getByUID('compare', compare.item.uid)
        return item
    })
)
---
<HomeCompare title={title} list={list} client:visible>
    <Fragment set:html={compareLine} alt="" class="img" slot="plateLine"/>
    <Image src={compareGood} alt="" class='ic ic-80' slot='imgCompareGood' />
    <Image src={compareBad} alt="" class='ic ic-80' slot='imgCompareBad' />
    <Image src={comparePlates} alt="Compare plates" class="img" slot='imgComparePlates' />
    <Fragment slot="imgCompareDot">
        {[...Array(list.length * 14)].map((el,idx) => (
            <Image src={compareDot} alt="" class="img" style={`--angle: ${360/(list.length * 14) * idx}deg`}/>
        ))}
    </Fragment>
    <Fragment slot="imgCompareDash">
        {list.map((el,idx) => (
            <Image src={compareDash} alt="" class="img" style={`--angle: ${360/list.length * idx}deg`}/>
        ))}
    </Fragment>
</HomeCompare>